<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NEXTFORM 3D - Premium 3D Printing Solutions</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary-blue: #00c3ff;
            --dark-bg: #0a0a0a;
            --card-bg: #111111;
            --border-color: #222222;
            --text-primary: #ffffff;
            --text-secondary: #cccccc;
            --discount-red: #ff3a44;
            --gradient-primary: linear-gradient(135deg, #00c3ff 0%, #0099cc 100%);
            --shadow-primary: 0 10px 30px rgba(0, 195, 255, 0.2);
        }

        body {
            font-family: 'Inter', 'Segoe UI', -apple-system, BlinkMacSystemFont, sans-serif;
            background: var(--dark-bg);
            color: var(--text-primary);
            line-height: 1.5;
            overflow-x: hidden;
        }

        .header {
            background: rgba(10, 10, 10, 0.95);
            position: fixed;
            top: 0;
            width: 100%;
            z-index: 1000;
            box-shadow: 0 2px 20px rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid var(--border-color);
        }

        .header-content {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 20px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            height: 80px;
        }

        .logo-container {
            display: flex;
            align-items: center;
            gap: 12px;
            cursor: pointer;
            transition: transform 0.3s ease;
        }

        .logo-container:hover {
            transform: scale(1.05);
        }

        .logo-img {
            height: 45px;
            width: auto;
            filter: drop-shadow(0 0 10px rgba(0, 195, 255, 0.3));
        }

        .search-container {
            flex: 1;
            max-width: 500px;
            display: flex;
            position: relative;
            margin: 0 30px;
        }

        .search-input {
            flex: 1;
            padding: 12px 50px 12px 20px;
            border: 2px solid var(--border-color);
            border-radius: 12px;
            font-size: 16px;
            outline: none;
            background: rgba(255, 255, 255, 0.05);
            color: var(--text-primary);
            transition: all 0.3s ease;
            font-weight: 400;
        }

        .search-input:focus {
            border-color: var(--primary-blue);
            background: rgba(255, 255, 255, 0.1);
            box-shadow: 0 0 0 3px rgba(0, 195, 255, 0.1);
        }

        .search-input::placeholder {
            color: var(--text-secondary);
        }

        .search-btn {
            position: absolute;
            right: 15px;
            top: 50%;
            transform: translateY(-50%);
            background: none;
            border: none;
            color: var(--text-secondary);
            cursor: pointer;
            transition: color 0.3s ease;
        }

        .search-btn:hover {
            color: var(--primary-blue);
        }

        .whatsapp-btn {
            background: var(--gradient-primary);
            color: #000000;
            border: none;
            padding: 12px 24px;
            border-radius: 12px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 14px;
            display: flex;
            align-items: center;
            gap: 8px;
            box-shadow: var(--shadow-primary);
        }

        .whatsapp-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 15px 40px rgba(0, 195, 255, 0.4);
        }

        .nav-bar {
            background: rgba(17, 17, 17, 0.95);
            padding: 0;
            border-bottom: 1px solid var(--border-color);
            position: fixed;
            top: 80px;
            width: 100%;
            z-index: 999;
            backdrop-filter: blur(20px);
        }

        .nav-content {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 20px;
        }

        .nav-menu {
            display: flex;
            list-style: none;
            gap: 40px;
        }

        .nav-link {
            color: var(--text-secondary);
            text-decoration: none;
            padding: 20px 0;
            font-size: 15px;
            font-weight: 500;
            display: block;
            position: relative;
            transition: all 0.3s ease;
        }

        .nav-link:hover {
            color: var(--primary-blue);
        }

        .nav-link::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 0;
            height: 3px;
            background: var(--gradient-primary);
            transition: width 0.3s ease;
            border-radius: 2px;
        }

        .nav-link:hover::after {
            width: 100%;
        }

        .mobile-menu-btn {
            display: none;
            background: none;
            border: none;
            color: var(--text-primary);
            font-size: 24px;
            cursor: pointer;
            padding: 8px;
            border-radius: 8px;
            transition: background 0.3s ease;
        }

        .mobile-menu-btn:hover {
            background: rgba(255, 255, 255, 0.1);
        }

        .hero {
            margin-top: 140px;
            background: linear-gradient(135deg, rgba(10, 10, 10, 0.9) 0%, rgba(17, 17, 17, 0.9) 100%);
            padding: 100px 0;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .hero::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background:
                radial-gradient(circle at 20% 80%, rgba(0, 195, 255, 0.15) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(0, 195, 255, 0.1) 0%, transparent 50%);
            z-index: 1;
        }

        .hero-content {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
            position: relative;
            z-index: 2;
        }

        .hero h1 {
            font-size: 56px;
            font-weight: 800;
            color: var(--text-primary);
            margin-bottom: 24px;
            line-height: 1.1;
            letter-spacing: -2px;
        }

        .hero .highlight {
            background: var(--gradient-primary);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .hero p {
            font-size: 20px;
            color: var(--text-secondary);
            margin-bottom: 40px;
            max-width: 700px;
            margin-left: auto;
            margin-right: auto;
            line-height: 1.6;
        }

        .cta-button {
            background: var(--gradient-primary);
            color: #000000;
            border: none;
            padding: 18px 36px;
            font-size: 16px;
            font-weight: 700;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
            box-shadow: var(--shadow-primary);
        }

        .cta-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 20px 50px rgba(0, 195, 255, 0.4);
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 20px;
        }

        .discount-section {
            background: rgba(17, 17, 17, 0.8);
            padding: 60px 0;
            margin: 60px 0;
            border-radius: 20px;
            border: 1px solid var(--border-color);
            position: relative;
            overflow: hidden;
            display: none;
        }

        .discount-section.show {
            display: block;
        }

        .discount-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background:
                radial-gradient(circle at 30% 70%, rgba(0, 195, 255, 0.08) 0%, transparent 50%),
                radial-gradient(circle at 70% 30%, rgba(0, 195, 255, 0.05) 0%, transparent 50%);
            z-index: 1;
        }

        .discount-header {
            text-align: left;
            margin-bottom: 40px;
            padding: 0 30px;
            position: relative;
            z-index: 2;
        }

        .discount-title {
            font-size: 32px;
            font-weight: 800;
            color: var(--text-primary);
            margin-bottom: 12px;
            letter-spacing: -1px;
        }

        .discount-subtitle {
            font-size: 18px;
            color: var(--text-secondary);
        }

        .discount-slider-container {
            position: relative;
            padding: 0 30px;
            z-index: 2;
        }

        .discount-slider {
            position: relative;
            overflow: hidden;
            border-radius: 16px;
        }

        .discount-slides {
            display: flex;
            transition: transform 0.5s ease;
            gap: 24px;
        }

        .discount-slide {
            min-width: 100%;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 24px;
        }

        .discount-product {
            background: var(--card-bg);
            border: 1px solid var(--border-color);
            border-radius: 16px;
            overflow: hidden;
            transition: all 0.4s ease;
            cursor: pointer;
            position: relative;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
        }

        .discount-product:hover {
            transform: translateY(-8px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.4);
            border-color: var(--primary-blue);
        }

        .discount-product-image {
            position: relative;
            width: 100%;
            height: 220px;
            background: rgba(0, 0, 0, 0.4);
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
        }

        .discount-product img {
            width: 100%;
            height: 100%;
            object-fit: contain;
            object-position: center;
            transition: transform 0.5s ease;
            background: rgba(255, 255, 255, 0.05);
        }

        .discount-badge {
            position: absolute;
            top: 12px;
            left: 12px;
            background: var(--discount-red);
            color: white;
            padding: 6px 12px;
            font-size: 12px;
            font-weight: 700;
            border-radius: 8px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            animation: pulse 2s infinite;
            z-index: 3;
            box-shadow: 0 2px 8px rgba(255, 58, 68, 0.4);
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        .discount-product-info {
            padding: 20px;
        }

        .discount-product-category {
            color: var(--primary-blue);
            font-size: 12px;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 8px;
        }

        .discount-product-name {
            font-size: 18px;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 12px;
            line-height: 1.3;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        .discount-product-price {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .discount-current-price {
            font-size: 22px;
            font-weight: 800;
            color: var(--text-primary);
        }

        .discount-original-price {
            font-size: 16px;
            color: var(--text-secondary);
            text-decoration: line-through;
        }

        .discount-percentage {
            background: var(--discount-red);
            color: white;
            padding: 4px 10px;
            font-size: 12px;
            font-weight: 700;
            border-radius: 6px;
        }

        .discount-buy-btn {
            width: 100%;
            background: var(--gradient-primary);
            color: #000000;
            border: none;
            padding: 14px;
            font-size: 14px;
            font-weight: 700;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .discount-buy-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(0, 195, 255, 0.4);
        }

        .slider-nav {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            background: rgba(17, 17, 17, 0.9);
            border: 2px solid var(--border-color);
            width: 50px;
            height: 50px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            color: var(--text-primary);
            transition: all 0.3s ease;
            z-index: 10;
            backdrop-filter: blur(10px);
        }

        .slider-nav:hover {
            background: var(--primary-blue);
            color: #000000;
            border-color: var(--primary-blue);
            transform: translateY(-50%) scale(1.1);
        }

        .slider-prev {
            left: 15px;
        }

        .slider-next {
            right: 15px;
        }

        .slider-dots {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-top: 30px;
        }

        .slider-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: var(--border-color);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .slider-dot.active {
            background: var(--primary-blue);
            transform: scale(1.3);
            box-shadow: 0 0 10px rgba(0, 195, 255, 0.5);
        }

        .filters {
            padding: 60px 0 30px;
        }

        .filter-title {
            font-size: 28px;
            font-weight: 800;
            color: var(--text-primary);
            margin-bottom: 30px;
            letter-spacing: -1px;
        }

        .filter-buttons {
            display: flex;
            gap: 12px;
            flex-wrap: wrap;
        }

        .filter-btn {
            background: var(--card-bg);
            border: 2px solid var(--border-color);
            color: var(--text-secondary);
            padding: 12px 20px;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 14px;
            font-weight: 600;
        }

        .filter-btn:hover,
        .filter-btn.active {
            background: var(--gradient-primary);
            color: #000000;
            border-color: var(--primary-blue);
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(0, 195, 255, 0.3);
        }

        .products-section {
            padding: 60px 0;
        }

        .section-title {
            font-size: 32px;
            font-weight: 800;
            color: var(--text-primary);
            margin-bottom: 40px;
            letter-spacing: -1px;
        }

        .products-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
            gap: 24px;
        }

        .product-card {
            background: var(--card-bg);
            border: 1px solid var(--border-color);
            border-radius: 16px;
            overflow: hidden;
            transition: all 0.4s ease;
            cursor: pointer;
            position: relative;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
        }

        .product-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.4);
            border-color: var(--primary-blue);
        }

        .product-image-container {
            position: relative;
            width: 100%;
            height: 280px;
            background: rgba(0, 0, 0, 0.4);
            overflow: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .product-card img {
            width: 100%;
            height: 100%;
            object-fit: contain;
            object-position: center;
            transition: transform 0.5s ease;
            background: rgba(255, 255, 255, 0.05);
        }

        .product-badge {
            position: absolute;
            top: 12px;
            right: 12px;
            background: var(--discount-red);
            color: white;
            padding: 6px 12px;
            font-size: 12px;
            font-weight: 700;
            border-radius: 8px;
            z-index: 3;
            box-shadow: 0 2px 8px rgba(255, 58, 68, 0.4);
        }

        .product-info {
            padding: 24px;
        }

        .product-category {
            color: var(--primary-blue);
            font-size: 12px;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 8px;
        }

        .product-name {
            font-size: 20px;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 12px;
            line-height: 1.3;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        .product-description {
            color: var(--text-secondary);
            font-size: 14px;
            margin-bottom: 20px;
            line-height: 1.6;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        .product-price {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .current-price {
            font-size: 24px;
            font-weight: 800;
            color: var(--text-primary);
        }

        .original-price {
            font-size: 18px;
            color: var(--text-secondary);
            text-decoration: line-through;
        }

        .discount-badge-small {
            background: var(--discount-red);
            color: white;
            padding: 4px 10px;
            font-size: 12px;
            font-weight: 700;
            border-radius: 6px;
        }

        .buy-now {
            width: 100%;
            background: var(--gradient-primary);
            color: #000000;
            border: none;
            padding: 16px;
            font-size: 14px;
            font-weight: 700;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .buy-now:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(0, 195, 255, 0.4);
        }

        .product-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.9);
            z-index: 2000;
            overflow-y: auto;
            padding: 20px;
        }

        .product-modal.show {
            display: block;
            animation: fadeIn 0.4s ease-in-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .modal-content {
            position: relative;
            background-color: var(--card-bg);
            max-width: 1200px;
            margin: 40px auto;
            border-radius: 20px;
            overflow: hidden;
            border: 1px solid var(--border-color);
            box-shadow: 0 30px 60px rgba(0, 0, 0, 0.6);
        }

        .close-modal {
            position: absolute;
            top: 24px;
            right: 24px;
            font-size: 24px;
            color: var(--text-secondary);
            background: rgba(0, 0, 0, 0.5);
            border: none;
            width: 44px;
            height: 44px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            z-index: 10;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
        }

        .close-modal:hover {
            background: var(--primary-blue);
            color: #000000;
            transform: scale(1.1);
        }

        .modal-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 40px;
            padding: 40px;
        }

        .modal-images {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .main-image-container {
            position: relative;
            width: 100%;
            height: 450px;
            background: rgba(0, 0, 0, 0.4);
            border-radius: 12px;
            overflow: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .main-image {
            max-width: 100%;
            max-height: 100%;
            object-fit: contain;
            object-position: center;
            background: rgba(255, 255, 255, 0.05);
        }

        .thumbnail-container {
            display: flex;
            gap: 12px;
            overflow-x: auto;
            padding-bottom: 12px;
        }

        .thumbnail {
            width: 80px;
            height: 80px;
            border-radius: 10px;
            cursor: pointer;
            object-fit: cover;
            border: 3px solid transparent;
            transition: all 0.3s ease;
            flex-shrink: 0;
        }

        .thumbnail.active {
            border-color: var(--primary-blue);
            box-shadow: 0 0 15px rgba(0, 195, 255, 0.5);
        }

        .thumbnail:hover {
            border-color: var(--primary-blue);
            transform: scale(1.1);
        }

        .modal-details {
            display: flex;
            flex-direction: column;
        }

        .modal-title {
            font-size: 32px;
            font-weight: 800;
            color: var(--text-primary);
            margin-bottom: 12px;
            line-height: 1.2;
            letter-spacing: -1px;
        }

        .modal-category {
            color: var(--primary-blue);
            font-size: 16px;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 24px;
        }

        .modal-price-container {
            display: flex;
            align-items: center;
            gap: 20px;
            margin-bottom: 24px;
            padding-bottom: 24px;
            border-bottom: 1px solid var(--border-color);
            flex-wrap: wrap;
        }

        .modal-current-price {
            font-size: 36px;
            font-weight: 800;
            color: var(--text-primary);
        }

        .modal-original-price {
            font-size: 24px;
            color: var(--text-secondary);
            text-decoration: line-through;
        }

        .modal-discount {
            background: var(--discount-red);
            color: white;
            padding: 8px 16px;
            font-size: 14px;
            font-weight: 700;
            border-radius: 8px;
        }

        .modal-description {
            color: var(--text-secondary);
            font-size: 16px;
            line-height: 1.7;
            margin-bottom: 40px;
        }

        .modal-video-container {
            margin-top: 24px;
            width: 100%;
            border-radius: 12px;
            overflow: hidden;
            position: relative;
            padding-top: 56.25%;
        }

        .modal-video {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border: none;
        }

        .modal-whatsapp-btn {
            background: #25d366;
            color: white;
            border: none;
            padding: 18px;
            font-size: 16px;
            font-weight: 700;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            margin-top: auto;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .modal-whatsapp-btn:hover {
            background: #1fad53;
            transform: translateY(-3px);
            box-shadow: 0 15px 40px rgba(37, 211, 102, 0.4);
        }

        .loading {
            text-align: center;
            padding: 80px 20px;
            color: var(--text-secondary);
        }

        .spinner {
            width: 50px;
            height: 50px;
            border: 4px solid var(--border-color);
            border-top: 4px solid var(--primary-blue);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 24px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .loading-text {
            font-size: 18px;
            font-weight: 600;
        }

        .error-message {
            text-align: center;
            padding: 60px 20px;
            color: var(--text-secondary);
            font-size: 18px;
        }

        .footer {
            background: rgba(17, 17, 17, 0.95);
            padding: 80px 0 40px;
            margin-top: 80px;
            border-top: 1px solid var(--border-color);
        }

        .footer-content {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 50px;
        }

        .footer-column {
            display: flex;
            flex-direction: column;
        }

        .footer-logo {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 24px;
        }

        .footer-logo-img {
            height: 35px;
            width: auto;
            filter: drop-shadow(0 0 8px rgba(0, 195, 255, 0.3));
        }

        .footer-description {
            color: var(--text-secondary);
            font-size: 16px;
            line-height: 1.7;
            margin-bottom: 24px;
        }

        .footer-title {
            font-size: 20px;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 24px;
        }

        .footer-links {
            list-style: none;
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .footer-link {
            color: var(--text-secondary);
            text-decoration: none;
            font-size: 16px;
            transition: all 0.3s ease;
        }

        .footer-link:hover {
            color: var(--primary-blue);
            transform: translateX(5px);
        }

        .footer-social {
            display: flex;
            gap: 16px;
            margin-top: 24px;
        }

        .social-icon {
            width: 48px;
            height: 48px;
            border-radius: 12px;
            background: var(--card-bg);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--text-primary);
            text-decoration: none;
            transition: all 0.3s ease;
            border: 2px solid var(--border-color);
        }

        .social-icon:hover {
            background: var(--primary-blue);
            color: #000000;
            transform: translateY(-4px);
            box-shadow: 0 10px 25px rgba(0, 195, 255, 0.3);
        }

        .footer-bottom {
            max-width: 1200px;
            margin: 50px auto 0;
            padding: 30px 20px 0;
            border-top: 1px solid var(--border-color);
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 24px;
        }

        .footer-copyright {
            color: var(--text-secondary);
            font-size: 16px;
        }

        .footer-bottom-links {
            display: flex;
            gap: 24px;
        }

        .footer-bottom-link {
            color: var(--text-secondary);
            text-decoration: none;
            font-size: 16px;
            transition: all 0.3s ease;
        }

        .footer-bottom-link:hover {
            color: var(--primary-blue);
        }

        .mobile-menu-overlay {
            position: fixed;
            top: 80px;
            left: 0;
            width: 100%;
            height: calc(100% - 80px);
            background: rgba(10, 10, 10, 0.98);
            z-index: 998;
            display: none;
            flex-direction: column;
            padding: 30px 20px;
            overflow-y: auto;
            backdrop-filter: blur(20px);
        }

        .mobile-menu-overlay.active {
            display: flex;
        }

        .mobile-search {
            margin-bottom: 30px;
            position: relative;
        }

        .mobile-search-input {
            width: 100%;
            padding: 16px 20px;
            border: 2px solid var(--border-color);
            border-radius: 12px;
            font-size: 16px;
            outline: none;
            background: rgba(255, 255, 255, 0.05);
            color: var(--text-primary);
        }

        .mobile-search-btn {
            position: absolute;
            right: 15px;
            top: 50%;
            transform: translateY(-50%);
            background: none;
            border: none;
            color: var(--text-secondary);
            cursor: pointer;
        }

        .mobile-nav-menu {
            list-style: none;
            display: flex;
            flex-direction: column;
            gap: 0;
        }

        .mobile-nav-link {
            color: var(--text-primary);
            text-decoration: none;
            padding: 20px 0;
            font-size: 20px;
            font-weight: 600;
            border-bottom: 1px solid var(--border-color);
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: color 0.3s ease;
        }

        .mobile-nav-link:hover {
            color: var(--primary-blue);
        }

        @media (max-width: 1200px) {
            .modal-grid {
                grid-template-columns: 1fr;
                gap: 30px;
            }

            .main-image-container {
                height: 400px;
            }
        }

        @media (max-width: 992px) {
            .header-content {
                height: 70px;
            }

            .nav-bar {
                top: 70px;
            }

            .hero {
                margin-top: 120px;
                padding: 80px 0;
            }

            .hero h1 {
                font-size: 42px;
            }

            .products-grid {
                grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            }

            .nav-menu {
                gap: 30px;
            }
        }

        @media (max-width: 768px) {
            .header-content {
                justify-content: space-between;
                height: 70px;
            }

            .search-container {
                display: none;
            }

            .mobile-menu-btn {
                display: block;
            }

            .nav-bar {
                display: none;
            }

            .nav-bar.active {
                display: block;
            }

            .hero {
                margin-top: 70px;
                padding: 60px 0;
            }

            .hero h1 {
                font-size: 36px;
            }

            .hero p {
                font-size: 18px;
            }

            .discount-slide {
                grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            }

            .footer-content {
                grid-template-columns: 1fr;
                gap: 40px;
            }

            .footer-bottom {
                flex-direction: column;
                align-items: center;
                text-align: center;
            }

            .slider-nav {
                width: 44px;
                height: 44px;
                font-size: 18px;
            }

            .slider-prev {
                left: 10px;
            }

            .slider-next {
                right: 10px;
            }
        }

        @media (max-width: 576px) {
            .header-content {
                padding: 0 15px;
            }

            .logo-img {
                height: 35px;
            }

            .whatsapp-btn {
                padding: 10px 16px;
                font-size: 12px;
            }

            .hero {
                padding: 50px 0;
            }

            .hero h1 {
                font-size: 32px;
            }

            .hero p {
                font-size: 16px;
            }

            .cta-button {
                padding: 16px 28px;
                font-size: 14px;
            }

            .section-title,
            .discount-title,
            .filter-title {
                font-size: 26px;
            }

            .products-grid {
                grid-template-columns: 1fr;
                gap: 20px;
            }

            .discount-slide {
                grid-template-columns: 1fr;
            }

            .modal-content {
                margin: 15px auto;
            }

            .modal-grid {
                padding: 24px 20px;
            }

            .modal-title {
                font-size: 26px;
            }

            .modal-current-price {
                font-size: 30px;
            }

            .main-image-container {
                height: 300px;
            }

            .slider-nav {
                display: none;
            }

            .container {
                padding: 0 15px;
            }

            .discount-header,
            .discount-slider-container {
                padding: 0 20px;
            }
        }

        @media (max-width: 480px) {
            .hero h1 {
                font-size: 28px;
            }

            .section-title,
            .discount-title,
            .filter-title {
                font-size: 24px;
            }

            .modal-current-price {
                font-size: 26px;
            }

            .modal-original-price {
                font-size: 18px;
            }

            .whatsapp-btn span {
                display: none;
            }
        }

        .promo-message {
            position: absolute;
            bottom: 12px;
            right: 12px;
            background: linear-gradient(135deg, #ff6b35 0%, #f7931e 100%);
            color: #ffffff;
            padding: 6px 12px;
            font-size: 11px;
            font-weight: 800;
            border-radius: 6px;
            text-transform: uppercase;
            letter-spacing: 0.8px;
            z-index: 10;
            box-shadow: 0 4px 12px rgba(255, 107, 53, 0.6);
            border: 2px solid rgba(255, 255, 255, 0.3);
            animation: promoGlow 2s ease-in-out infinite alternate;
            backdrop-filter: blur(4px);
        }

        @keyframes promoGlow {
            0% {
                box-shadow: 0 4px 12px rgba(255, 107, 53, 0.6);
                transform: scale(1);
            }
            100% {
                box-shadow: 0 6px 20px rgba(255, 107, 53, 0.8);
                transform: scale(1.05);
            }
        }

        img {
            transition: opacity 0.3s ease;
        }

        img[src*="placeholder"] {
            opacity: 0.7;
            background: rgba(255, 255, 255, 0.1);
        }

        .logo-fallback {
            background: var(--gradient-primary);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            white-space: nowrap;
        }

        .modal-promo-badge {
            display: inline-block;
            background: linear-gradient(135deg, #ff6b35 0%, #f7931e 100%);
            color: #ffffff;
            padding: 8px 16px;
            font-size: 12px;
            font-weight: 800;
            border-radius: 8px;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 20px;
            box-shadow: 0 4px 12px rgba(255, 107, 53, 0.6);
            border: 2px solid rgba(255, 255, 255, 0.3);
            animation: promoGlow 2s ease-in-out infinite alternate;
        }
    </style>
</head>
<body>
    <header class="header">
        <div class="header-content">
            <div class="logo-container" onclick="window.location.reload()">
                <img src="/images/nextform-logo.png" alt="NEXTFORM 3D Logo" class="logo-img" onerror="this.style.display='none'; this.nextElementSibling.style.display='block';">
                <div class="logo-fallback" style="display: none; color: var(--primary-blue); font-weight: 800; font-size: 24px;">NEXTFORM 3D</div>
            </div>

            <div class="search-container">
                <input type="text" class="search-input" placeholder="Search 3D printers, materials, and more...">
                <button class="search-btn">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <circle cx="11" cy="11" r="8"></circle>
                        <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
                    </svg>
                </button>
            </div>

            <button class="whatsapp-btn" onclick="openWhatsApp()">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"/>
                </svg>
                <span>WhatsApp</span>
            </button>

            <button class="mobile-menu-btn" onclick="toggleMobileMenu()">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <line x1="3" y1="12" x2="21" y2="12"></line>
                    <line x1="3" y1="6" x2="21" y2="6"></line>
                    <line x1="3" y1="18" x2="21" y2="18"></line>
                </svg>
            </button>
        </div>

        <div class="nav-bar">
            <div class="nav-content">
                <ul class="nav-menu">
                    <li><a href="#" class="nav-link">Printers</a></li>
                    <li><a href="#" class="nav-link">Materials</a></li>
                    <li><a href="#" class="nav-link">Services</a></li>
                    <li><a href="#" class="nav-link">Support</a></li>
                    <li><a href="#" class="nav-link">About Us</a></li>
                    <li><a href="#" class="nav-link">Contact</a></li>
                </ul>
            </div>
        </div>
    </header>

    <div class="mobile-menu-overlay" id="mobileMenuOverlay">
        <div class="mobile-search">
            <input type="text" class="mobile-search-input" placeholder="Search products...">
            <button class="mobile-search-btn">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <circle cx="11" cy="11" r="8"></circle>
                    <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
                </svg>
            </button>
        </div>

        <ul class="mobile-nav-menu">
            <li><a href="#" class="mobile-nav-link">Printers</a></li>
            <li><a href="#" class="mobile-nav-link">Materials</a></li>
            <li><a href="#" class="mobile-nav-link">Services</a></li>
            <li><a href="#" class="mobile-nav-link">Support</a></li>
            <li><a href="#" class="mobile-nav-link">About Us</a></li>
            <li><a href="#" class="mobile-nav-link">Contact</a></li>
        </ul>
    </div>

    <section class="hero">
        <div class="hero-content">
            <h1>Shape the <span class="highlight">Future</span> with 3D Printing</h1>
            <p>Professional 3D printing solutions for creators, engineers, and innovators. Precision meets possibility with cutting-edge technology.</p>
            <button class="cta-button" onclick="scrollToProducts()">Explore Products</button>
        </div>
    </section>

    <div class="container">
        <section class="discount-section" id="discountSection">
            <div class="discount-header">
                <h2 class="discount-title">Special Offers</h2>
                <p class="discount-subtitle">Limited time offers on selected premium products</p>
            </div>

            <div class="discount-slider-container">
                <div class="discount-slider">
                    <div class="discount-slides" id="discountSlides">
                    </div>

                    <button class="slider-nav slider-prev" onclick="previousSlide()" id="prevBtn" style="display: none;">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <polyline points="15 18 9 12 15 6"></polyline>
                        </svg>
                    </button>
                    <button class="slider-nav slider-next" onclick="nextSlide()" id="nextBtn" style="display: none;">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <polyline points="9 18 15 12 9 6"></polyline>
                        </svg>
                    </button>
                </div>

                <div class="slider-dots" id="sliderDots">
                </div>
            </div>
        </section>

        <section class="filters">
            <h2 class="filter-title">Shop by Category</h2>
            <div class="filter-buttons" id="filterButtons">
            </div>
        </section>

        <section class="products-section">
            <h2 class="section-title">Featured Products</h2>
            <div class="products-grid" id="productsGrid">
                <div class="loading">
                    <div class="spinner"></div>
                    <div class="loading-text">Loading premium products...</div>
                </div>
            </div>
        </section>
    </div>

    <div class="product-modal" id="productModal">
        <div class="modal-content">
            <button class="close-modal" onclick="closeProductModal()">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <line x1="18" y1="6" x2="6" y2="18"></line>
                    <line x1="6" y1="6" x2="18" y2="18"></line>
                </svg>
            </button>
            <div id="modalContent">
            </div>
        </div>
    </div>

    <footer class="footer">
        <div class="footer-content">
            <div class="footer-column">
                <div class="footer-logo">
                    <img src="/images/nextform-logo.png" alt="NEXTFORM 3D Logo" class="footer-logo-img" onerror="this.style.display='none'; this.nextElementSibling.style.display='block';">
                    <div class="logo-fallback" style="display: none; color: var(--primary-blue); font-weight: 700; font-size: 20px;">NEXTFORM 3D</div>
                </div>
                <p class="footer-description">
                    NEXTFORM 3D provides premium 3D printing solutions for professionals, businesses, and enthusiasts.
                    Our cutting-edge technology delivers precision, quality, and innovation in every print.
                </p>
                <div class="footer-social">
                    <a href="#" class="social-icon">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M18 2h-3a5 5 0 00-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 011-1h3z"></path>
                        </svg>
                    </a>
                    <a href="#" class="social-icon">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M23 3a10.9 10.9 0 01-3.14 1.53 4.48 4.48 0 00-7.86 3v1A10.66 10.66 0 013 4s-4 9 5 13a11.64 11.64 0 01-7 2c9 5 20 0 20-11.5a4.5 4.5 0 00-.08-.83A7.72 7.72 0 0023 3z"></path>
                        </svg>
                    </a>
                    <a href="#" class="social-icon">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                            <rect x="2" y="2" width="20" height="20" rx="5" ry="5"></rect>
                            <path d="M16 11.37A4 4 0 1112.63 8 4 4 0 0116 11.37z"></path>
                            <line x1="17.5" y1="6.5" x2="17.51" y2="6.5"></line>
                        </svg>
                    </a>
                    <a href="#" class="social-icon">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M16 8a6 6 0 016 6v7h-4v-7a2 2 0 00-2-2 2 2 0 00-2 2v7h-4v-7a6 6 0 016-6z"></path>
                            <rect x="2" y="9" width="4" height="12"></rect>
                            <circle cx="4" cy="4" r="2"></circle>
                        </svg>
                    </a>
                </div>
            </div>

            <div class="footer-column">
                <h3 class="footer-title">Products</h3>
                <ul class="footer-links">
                    <li><a href="#" class="footer-link">3D Printers</a></li>
                    <li><a href="#" class="footer-link">Resin Printers</a></li>
                    <li><a href="#" class="footer-link">Filaments</a></li>
                    <li><a href="#" class="footer-link">Resins</a></li>
                    <li><a href="#" class="footer-link">Accessories</a></li>
                </ul>
            </div>

            <div class="footer-column">
                <h3 class="footer-title">Services</h3>
                <ul class="footer-links">
                    <li><a href="#" class="footer-link">3D Printing</a></li>
                    <li><a href="#" class="footer-link">3D Modeling</a></li>
                    <li><a href="#" class="footer-link">Prototyping</a></li>
                    <li><a href="#" class="footer-link">Consulting</a></li>
                    <li><a href="#" class="footer-link">Training</a></li>
                </ul>
            </div>

            <div class="footer-column">
                <h3 class="footer-title">Contact Us</h3>
                <ul class="footer-links">
                    <li><a href="#" class="footer-link">WhatsApp: +91 9471314033</a></li>
                    <li><a href="#" class="footer-link">Email: info@nextform3d.com</a></li>
                    <li><a href="#" class="footer-link">Support Center</a></li>
                    <li><a href="#" class="footer-link">Careers</a></li>
                </ul>
            </div>
        </div>

        <div class="footer-bottom">
            <p class="footer-copyright">&copy; 2024 NEXTFORM 3D. All rights reserved.</p>
            <div class="footer-bottom-links">
                <a href="#" class="footer-bottom-link">Privacy Policy</a>
                <a href="#" class="footer-bottom-link">Terms of Service</a>
                <a href="#" class="footer-bottom-link">Shipping Policy</a>
            </div>
        </div>
    </footer>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getFirestore, collection, getDocs, onSnapshot } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

        const firebaseConfig = {
            apiKey: "AIzaSyD9M_BjTdF8Wq-gaezYKYim1lyMZZPe-HQ",
            authDomain: "d-print-bc0e0.firebaseapp.com",
            projectId: "d-print-bc0e0",
            storageBucket: "d-print-bc0e0.appspot.com",
            messagingSenderId: "1035629666186",
            appId: "1:1035629666186:web:ad996c1fe3e1b997713273"
        };

        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        let allProducts = [];
        let discountProducts = [];
        let currentSlide = 0;
        let totalSlides = 0;
        let autoSlideInterval;
        const whatsappNumber = '917977432408';
        const productsPerSlide = 4;
        let currentMainImage = 0;

        const CACHE_KEY = 'nextform_products_cache';
        const CACHE_TIMESTAMP_KEY = 'nextform_cache_timestamp';
        const CACHE_DURATION = 5 * 60 * 1000;

        function loadCachedData() {
            try {
                const cachedData = localStorage.getItem(CACHE_KEY);
                const cacheTimestamp = localStorage.getItem(CACHE_TIMESTAMP_KEY);

                if (cachedData && cacheTimestamp) {
                    const now = Date.now();
                    const cacheAge = now - parseInt(cacheTimestamp);

                    if (cacheAge < CACHE_DURATION) {
                        console.log('Loading from cache...');
                        allProducts = JSON.parse(cachedData);
                        processAndDisplayProducts();
                        return true;
                    }
                }
            } catch (error) {
                console.log('Cache error:', error);
            }
            return false;
        }

        function cacheProducts(products) {
            try {
                localStorage.setItem(CACHE_KEY, JSON.stringify(products));
                localStorage.setItem(CACHE_TIMESTAMP_KEY, Date.now().toString());
            } catch (error) {
                console.log('Cache storage error:', error);
            }
        }

        function processAndDisplayProducts() {
            discountProducts = allProducts.filter(product =>
                product.originalPrice && product.originalPrice > product.currentPrice
            );

            const uniqueCategories = [...new Set(allProducts.map(product => product.category))];
            generateFilterButtons(uniqueCategories);
            createDiscountSlides();
            displayProducts(allProducts);
        }

        window.openWhatsApp = function(productId = null) {
            let product = null;
            if (productId) {
                product = allProducts.find(p => p.id === productId);
            }

            let message = product ?
                `Hi, I'm interested in the following product:\n\n` +
                `*Name*: ${product.name}\n` +
                `*Price*: ${product.currentPrice.toLocaleString()}\n` +
                `${product.originalPrice ? `*Discount*: Was ${product.originalPrice.toLocaleString()}, Now ${product.currentPrice.toLocaleString()} (${calculateDiscount(product.currentPrice, product.originalPrice)}% off)\n` : ''}` +
                `${product.pictureUrls && product.pictureUrls.length > 0 ? `*Image*: ${product.pictureUrls[0]}\n` : ''}` +
                `${product.videoUrl ? `*Video*: ${product.videoUrl}\n` : ''}` +
                `Can you provide more details and assist with the purchase?` :
                'Hello! I am interested in your premium 3D printing products. Can you help me?';

            const encodedMessage = encodeURIComponent(message);
            const whatsappUrl = `https://wa.me/${whatsappNumber}?text=${encodedMessage}`;
            window.open(whatsappUrl, '_blank');
        };

        window.toggleMobileMenu = function() {
            const mobileMenuOverlay = document.getElementById('mobileMenuOverlay');
            mobileMenuOverlay.classList.toggle('active');
            document.body.style.overflow = mobileMenuOverlay.classList.contains('active') ? 'hidden' : 'auto';
        };

        window.scrollToProducts = function() {
            const discountSection = document.getElementById('discountSection');
            const productsSection = document.querySelector('.products-section');

            if (discountSection.classList.contains('show')) {
                discountSection.scrollIntoView({ behavior: 'smooth' });
            } else {
                productsSection.scrollIntoView({ behavior: 'smooth' });
            }
        };

        function calculateDiscount(currentPrice, originalPrice) {
            return originalPrice && originalPrice > currentPrice
                ? Math.round(((originalPrice - currentPrice) / originalPrice) * 100)
                : 0;
        }

        function extractVideoId(url) {
            if (!url) return null;
            const regExp = /^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|&v=)([^#&?]*).*/;
            const match = url.match(regExp);
            return (match && match[2].length === 11) ? match[2] : null;
        }

        function createDiscountProductCard(product) {
            const discount = calculateDiscount(product.currentPrice, product.originalPrice);
            const imageUrl = product.pictureUrls && product.pictureUrls.length > 0
                ? product.pictureUrls[0]
                : '/placeholder.svg?height=220&width=280';

            return `
                <div class="discount-product" onclick="showProductDetails('${product.id}')">
                    <div class="discount-product-image">
                        <img src="${imageUrl}" alt="${product.name}" loading="lazy" onerror="this.src='/placeholder.svg?height=220&width=280'">
                        <div class="discount-badge">${discount}% off</div>
                        ${product.promoMessage && product.promoMessage.trim() !== '' ? `<div class="promo-message">${product.promoMessage}</div>` : ''}
                    </div>
                    <div class="discount-product-info">
                        <div class="discount-product-category">${product.category || 'Product'}</div>
                        <h3 class="discount-product-name">${product.name}</h3>
                        <div class="discount-product-price">
                            <span class="discount-current-price">${product.currentPrice.toLocaleString()}</span>
                            <span class="discount-original-price">${product.originalPrice.toLocaleString()}</span>
                            <span class="discount-percentage">${discount}% off</span>
                        </div>
                        <button class="discount-buy-btn" onclick="event.stopPropagation(); openWhatsApp('${product.id}')">Buy via WhatsApp</button>
                    </div>
                </div>
            `;
        }

        function createProductCard(product) {
            const discount = calculateDiscount(product.currentPrice, product.originalPrice);
            const imageUrl = product.pictureUrls && product.pictureUrls.length > 0
                ? product.pictureUrls[0]
                : '/placeholder.svg?height=280&width=320';

            return `
                <div class="product-card" data-category="${product.category || 'other'}" onclick="showProductDetails('${product.id}')">
                    <div class="product-image-container">
                        <img src="${imageUrl}" alt="${product.name}" loading="lazy" onerror="this.src='/placeholder.svg?height=280&width=320'">
                        ${discount > 0 ? `<div class="product-badge">${discount}% off</div>` : ''}
                        ${product.promoMessage && product.promoMessage.trim() !== '' ? `<div class="promo-message">${product.promoMessage}</div>` : ''}
                    </div>
                    <div class="product-info">
                        <div class="product-category">${product.category || 'Product'}</div>
                        <h3 class="product-name">${product.name}</h3>
                        <p class="product-description">${product.description || 'Premium 3D printing solution designed for professional use with advanced technology and reliable performance.'}</p>
                        <div class="product-price">
                            <span class="current-price">${product.currentPrice.toLocaleString()}</span>
                            ${product.originalPrice && discount > 0 ? `<span class="original-price">${product.originalPrice.toLocaleString()}</span>` : ''}
                            ${discount > 0 ? `<span class="discount-badge-small">${discount}% off</span>` : ''}
                        </div>
                        <button class="buy-now" onclick="event.stopPropagation(); openWhatsApp('${product.id}')">Buy via WhatsApp</button>
                    </div>
                </div>
            `;
        }

        function createProductModalContent(product) {
            const discount = calculateDiscount(product.currentPrice, product.originalPrice);
            const videoId = extractVideoId(product.videoUrl);

            let thumbnailsHTML = '';
            if (product.pictureUrls && product.pictureUrls.length > 0) {
                thumbnailsHTML = product.pictureUrls.map((url, index) =>
                    `<img src="${url}" alt="${product.name}" class="thumbnail ${index === 0 ? 'active' : ''}"
                     onclick="changeMainImage(${index})" data-index="${index}" loading="lazy">`
                ).join('');
            }

            const mainImageUrl = product.pictureUrls && product.pictureUrls.length > 0
                ? product.pictureUrls[0]
                : '/placeholder.svg?height=450&width=450';

            return `
                <div class="modal-grid">
                    <div class="modal-images">
                        <div class="main-image-container">
                            <img src="${mainImageUrl}" alt="${product.name}" class="main-image" id="mainProductImage" loading="lazy">
                            ${product.promoMessage && product.promoMessage.trim() !== '' ? `<div class="promo-message">${product.promoMessage}</div>` : ''}
                        </div>

                        ${product.pictureUrls && product.pictureUrls.length > 1 ?
                            `<div class="thumbnail-container" id="thumbnailContainer">
                                ${thumbnailsHTML}
                            </div>` : ''
                        }

                        ${videoId ?
                            `<div class="modal-video-container">
                                <iframe class="modal-video" src="https://www.youtube.com/embed/${videoId}"
                                 allowfullscreen title="Product Video" loading="lazy"></iframe>
                            </div>` : ''
                        }
                    </div>

                    <div class="modal-details">
                        <h2 class="modal-title">${product.name}</h2>
                        <div class="modal-category">${product.category || 'Premium Product'}</div>
                        ${product.promoMessage && product.promoMessage.trim() !== '' ? `<div class="modal-promo-badge">${product.promoMessage}</div>` : ''}

                        <div class="modal-price-container">
                            <span class="modal-current-price">${product.currentPrice.toLocaleString()}</span>
                            ${product.originalPrice && discount > 0 ?
                                `<span class="modal-original-price">${product.originalPrice.toLocaleString()}</span>
                                 <span class="modal-discount">${discount}% off</span>` : ''
                            }
                        </div>

                        <p class="modal-description">${product.description || 'Premium 3D printing solution designed for professional use. Features advanced technology and reliable performance for all your printing needs with exceptional quality and precision.'}</p>

                        <button class="modal-whatsapp-btn" onclick="openWhatsApp('${product.id}')">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"/>
                            </svg>
                            Buy via WhatsApp
                        </button>
                    </div>
                </div>
            `;
        }

        window.changeMainImage = function(index) {
            const product = window.currentProduct;
            if (!product || !product.pictureUrls || index >= product.pictureUrls.length) return;

            const mainImage = document.getElementById('mainProductImage');
            const thumbnails = document.querySelectorAll('.thumbnail');

            mainImage.src = product.pictureUrls[index];
            currentMainImage = index;

            thumbnails.forEach(thumb => {
                thumb.classList.remove('active');
                if (parseInt(thumb.dataset.index) === index) {
                    thumb.classList.add('active');
                }
            });
        };

        function createDiscountSlides() {
            const slidesContainer = document.getElementById('discountSlides');
            const dotsContainer = document.getElementById('sliderDots');

            if (discountProducts.length === 0) {
                document.getElementById('discountSection').classList.remove('show');
                return;
            }

            document.getElementById('discountSection').classList.add('show');

            totalSlides = Math.ceil(discountProducts.length / productsPerSlide);

            let slidesHTML = '';
            let dotsHTML = '';

            for (let i = 0; i < totalSlides; i++) {
                const startIndex = i * productsPerSlide;
                const endIndex = Math.min(startIndex + productsPerSlide, discountProducts.length);
                const slideProducts = discountProducts.slice(startIndex, endIndex);

                slidesHTML += `
                    <div class="discount-slide">
                        ${slideProducts.map(product => createDiscountProductCard(product)).join('')}
                    </div>
                `;

                dotsHTML += `<div class="slider-dot ${i === 0 ? 'active' : ''}" onclick="goToSlide(${i})"></div>`;
            }

            slidesContainer.innerHTML = slidesHTML;
            dotsContainer.innerHTML = dotsHTML;

            if (totalSlides > 1) {
                document.getElementById('prevBtn').style.display = 'flex';
                document.getElementById('nextBtn').style.display = 'flex';
                startAutoSlide();
            }
        }

        function updateSlider() {
            const slides = document.getElementById('discountSlides');
            const dots = document.querySelectorAll('.slider-dot');

            if (slides && totalSlides > 0) {
                slides.style.transform = `translateX(-${currentSlide * 100}%)`;

                dots.forEach((dot, index) => {
                    dot.classList.toggle('active', index === currentSlide);
                });
            }
        }

        window.nextSlide = function() {
            currentSlide = (currentSlide + 1) % totalSlides;
            updateSlider();
        };

        window.previousSlide = function() {
            currentSlide = (currentSlide - 1 + totalSlides) % totalSlides;
            updateSlider();
        };

        window.goToSlide = function(slideIndex) {
            currentSlide = slideIndex;
            updateSlider();
        };

        function startAutoSlide() {
            if (autoSlideInterval) {
                clearInterval(autoSlideInterval);
            }
            autoSlideInterval = setInterval(() => {
                window.nextSlide();
            }, 5000);
        }

        function stopAutoSlide() {
            if (autoSlideInterval) {
                clearInterval(autoSlideInterval);
            }
        }

        window.showProductDetails = function(productId) {
            const product = allProducts.find(p => p.id === productId);
            if (!product) return;

            window.currentProduct = product;
            currentMainImage = 0;

            const modalContent = document.getElementById('modalContent');
            modalContent.innerHTML = createProductModalContent(product);

            document.getElementById('productModal').classList.add('show');
            document.body.style.overflow = 'hidden';
        };

        window.closeProductModal = function() {
            document.getElementById('productModal').classList.remove('show');
            document.body.style.overflow = 'auto';
        };

        function setupFirestoreListener() {
            const productsRef = collection(db, 'products');

            onSnapshot(productsRef, (snapshot) => {
                const freshProducts = [];

                snapshot.forEach((doc) => {
                    try {
                        const data = doc.data();

                        let processedPictureUrls = [];
                        if (data.pictureUrls && Array.isArray(data.pictureUrls)) {
                            processedPictureUrls = data.pictureUrls.map(url => {
                                if (url.startsWith('data:image/')) {
                                    return url;
                                } else if (url.includes('base64')) {
                                    return url;
                                } else {
                                    return url;
                                }
                            });
                        }

                        const product = {
                            id: doc.id,
                            name: data.name || 'Unnamed Product',
                            currentPrice: parseInt(data.currentPrice) || 0,
                            originalPrice: data.originalPrice ? parseInt(data.originalPrice) : null,
                            pictureUrls: processedPictureUrls,
                            videoUrl: data.videoUrl || null,
                            category: data.category || 'other',
                            description: data.description || '',
                            promoMessage: data.promoMessage || null,
                            discountLabel: data.discountLabel || null
                        };

                        if (data.promoMessage) {
                            console.log('Product with promo message:', data.name, 'Promo:', data.promoMessage);
                        }

                        freshProducts.push(product);
                    } catch (docError) {
                        console.warn('Error processing document:', doc.id, docError);
                    }
                });

                console.log(`Loaded ${freshProducts.length} fresh products from Firebase`);

                allProducts = freshProducts;
                cacheProducts(allProducts);

                processAndDisplayProducts();

            }, (error) => {
                console.error('Error setting up Firestore listener:', error);

                if (allProducts.length === 0) {
                    console.log('No cached data available, loading fallback data');
                    loadFallbackData();
                }
            });
        }

        function loadFallbackData() {
            allProducts = [
                {
                    id: 'fallback-1',
                    name: 'Premium 3D Printer Pro',
                    currentPrice: 45000,
                    originalPrice: 55000,
                    pictureUrls: ['/placeholder.svg?height=280&width=320'],
                    videoUrl: null,
                    category: 'printers',
                    description: 'Professional grade 3D printer with advanced features and precision printing capabilities.',
                    promoMessage: 'Best Seller',
                    discountLabel: null
                },
                {
                    id: 'fallback-2',
                    name: 'High-Quality PLA Filament',
                    currentPrice: 1200,
                    originalPrice: 1500,
                    pictureUrls: ['/placeholder.svg?height=280&width=320'],
                    videoUrl: null,
                    category: 'materials',
                    description: 'Premium PLA filament for high-quality 3D printing with excellent layer adhesion.',
                    promoMessage: 'Popular',
                    discountLabel: null
                },
                {
                    id: 'fallback-3',
                    name: 'Resin 3D Printer Ultra',
                    currentPrice: 25000,
                    originalPrice: 30000,
                    pictureUrls: ['/placeholder.svg?height=280&width=320'],
                    videoUrl: null,
                    category: 'printers',
                    description: 'High-resolution resin 3D printer for detailed miniatures and prototypes.',
                    promoMessage: 'New',
                    discountLabel: null
                },
                {
                    id: 'fallback-4',
                    name: '3D Printing Service Package',
                    currentPrice: 5000,
                    originalPrice: null,
                    pictureUrls: ['/placeholder.svg?height=280&width=320'],
                    videoUrl: null,
                    category: 'services',
                    description: 'Complete 3D printing service including design consultation and printing.',
                    promoMessage: null,
                    discountLabel: null
                }
            ];

            console.log('Loaded fallback product data');
            processAndDisplayProducts();
        }

        function generateFilterButtons(categories) {
            const filterButtonsContainer = document.getElementById('filterButtons');
            filterButtonsContainer.innerHTML = '';

            const allButton = document.createElement('button');
            allButton.className = 'filter-btn active';
            allButton.setAttribute('data-category', 'all');
            allButton.textContent = 'All Products';
            allButton.addEventListener('click', () => filterProducts('all'));
            filterButtonsContainer.appendChild(allButton);

            categories.forEach(category => {
                if (!category) return;

                const button = document.createElement('button');
                button.className = 'filter-btn';
                button.setAttribute('data-category', category);
                button.textContent = category.charAt(0).toUpperCase() + category.slice(1);
                button.addEventListener('click', () => filterProducts(category));
                filterButtonsContainer.appendChild(button);
            });
        }

        function displayProducts(products) {
            const productsGrid = document.getElementById('productsGrid');

            if (products.length === 0) {
                productsGrid.innerHTML = '<div class="error-message">No products found matching your criteria.</div>';
                return;
            }

            productsGrid.innerHTML = products.map(createProductCard).join('');
        }

        function filterProducts(category) {
            const filteredProducts = category === 'all'
                ? allProducts
                : allProducts.filter(product => product.category === category);

            displayProducts(filteredProducts);

            document.querySelectorAll('.filter-btn').forEach(btn => {
                btn.classList.remove('active');
                if (btn.dataset.category === category) {
                    btn.classList.add('active');
                }
            });
        }

        function setupSearch() {
            const searchInput = document.querySelector('.search-input');
            const searchBtn = document.querySelector('.search-btn');
            const mobileSearchInput = document.querySelector('.mobile-search-input');
            const mobileSearchBtn = document.querySelector('.mobile-search-btn');

            function performSearch(query) {
                if (query === '') {
                    displayProducts(allProducts);
                    return;
                }

                const filteredProducts = allProducts.filter(product =>
                    product.name.toLowerCase().includes(query) ||
                    (product.description && product.description.toLowerCase().includes(query)) ||
                    (product.category && product.category.toLowerCase().includes(query))
                );

                displayProducts(filteredProducts);
            }

            function handleSearch(inputElement) {
                const query = inputElement.value.toLowerCase().trim();
                performSearch(query);
            }

            if (searchInput) {
                searchInput.addEventListener('input', () => handleSearch(searchInput));
                searchBtn.addEventListener('click', () => handleSearch(searchInput));
                searchInput.addEventListener('keypress', (e) => {
                    if (e.key === 'Enter') {
                        handleSearch(searchInput);
                    }
                });
            }

            if (mobileSearchInput) {
                mobileSearchInput.addEventListener('input', () => handleSearch(mobileSearchInput));
                mobileSearchBtn.addEventListener('click', () => handleSearch(mobileSearchInput));
                mobileSearchInput.addEventListener('keypress', (e) => {
                    if (e.key === 'Enter') {
                        handleSearch(mobileSearchInput);
                    }
                });
            }
        }

        let startX = 0;
        let endX = 0;

        function handleTouchStart(e) {
            startX = e.touches[0].clientX;
        }

        function handleTouchEnd(e) {
            endX = e.changedTouches[0].clientX;
            handleSwipe();
        }

        function handleSwipe() {
            const threshold = 50;
            const diff = startX - endX;

            if (Math.abs(diff) > threshold) {
                if (diff > 0) {
                    window.nextSlide();
                } else {
                    window.previousSlide();
                }
            }
        }

        window.addEventListener('click', function(event) {
            const modal = document.getElementById('productModal');
            if (event.target === modal) {
                window.closeProductModal();
            }
        });

        window.addEventListener('keydown', function(event) {
            if (event.key === 'Escape') {
                window.closeProductModal();
            }
        });

        window.addEventListener('click', function(event) {
            const mobileMenuOverlay = document.getElementById('mobileMenuOverlay');
            const mobileMenuBtn = document.querySelector('.mobile-menu-btn');

            if (mobileMenuOverlay.classList.contains('active') &&
                !mobileMenuOverlay.contains(event.target) &&
                !mobileMenuBtn.contains(event.target)) {
                window.toggleMobileMenu();
            }
        });

        function init() {
            const productsGrid = document.getElementById('productsGrid');
            productsGrid.innerHTML = '';

            setupSearch();

            const hasCachedData = loadCachedData();

            if (!hasCachedData) {
                productsGrid.innerHTML = '<div class="loading-text">Loading products...</div>';
            }

            setupFirestoreListener();

            const slider = document.querySelector('.discount-slider');
            if (slider) {
                slider.addEventListener('touchstart', handleTouchStart, { passive: true });
                slider.addEventListener('touchend', handleTouchEnd, { passive: true });
            }

            const discountSection = document.getElementById('discountSection');
            discountSection.addEventListener('mouseenter', stopAutoSlide);
            discountSection.addEventListener('mouseleave', () => {
                if (totalSlides > 1) startAutoSlide();
            });
        }

        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', init);
        } else {
            init();
        }

        window.addEventListener('beforeunload', () => {
            if (autoSlideInterval) {
                clearInterval(autoSlideInterval);
            }
        });
    </script>
</body>
</html>
